<html>
<head>
<style  type="text/css">
#editor{
  width: 500px;
  min-height: 40px;
  border: solid 1px gray;
  padding: 4px;
}
#resultcnt{
  width: 100%;
  margin-top: 16px;
}
#result{
  background: #f4f4f4;
  border: 1px solid #ddd;
  border-left: 3px solid #f36d33;
  color: #666;
  display: block;
  font-family: monospace;
  font-size: 15px;
  line-height: 1.6;
  margin: 16px 0 32px 0;
  margin-bottom: 1.6em;
  max-width: 666px;
  overflow: auto;
  overflow: visible;
  padding: 1em 1.5em;
  page-break-inside: avoid;
  word-break: break-all;
  word-wrap: break-word;
}
</style>
<script
			  src="code.jquery.com/jquery-3.6.4.min.js"
			  integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
			  crossorigin="anonymous"></script>

<script type="application/javascript">

function copyText() {
  navigator.clipboard.writeText(document.getElementById("result").textContent);
}
function escapeHTML(htmlStr) {
   return htmlStr.replace(/&/g, "&amp;")
         .replace(/</g, "&lt;")
         .replace(/>/g, "&gt;")
         .replace(/"/g, "&quot;")
         .replace(/'/g, "&#39;");        

}

$(document).ready(function() {
  $('#editor').on('paste', function(e) {
    var orgEvent = e.originalEvent;
    for (var i = 0; i < orgEvent.clipboardData.items.length; i++) {
      if (orgEvent.clipboardData.items[i].kind == "file" && 
           ( orgEvent.clipboardData.items[i].type == "image/png" || orgEvent.clipboardData.items[i].type == "image/jpeg"  ) ) {
        var imageFile = orgEvent.clipboardData.items[i].getAsFile();
        var fileReader = new FileReader();
        fileReader.onloadend = function() {
          // fileReader.result already looks like data:image/png;base64, 
          var myres='<img src="'+fileReader.result+'" >';
          //$('#result').html(myres);
          //if(document.getElementById("hugo").checked) { 
          //  
          //}
          document.getElementById("result").textContent=escapeHTML(myres);
          if(document.getElementById("copytoclipboard").checked) { 
            navigator.clipboard.writeText(myres);
          }
        // clean input
        document.getElementById("editor").innerHTML=""
        }
        fileReader.readAsDataURL(imageFile);
        break;
      }
    }
  });
});
</script>
</head>
<body>
<div id="status">
  Nothing happened yed
</div>
  <div id="options">
  <fieldset>
      <legend>Choose Mode:</legend>
  
      <div>
        <input type="checkbox" id="copytoclipboard" name="copytoclipboard" checked>
        <label for="copytoclipboard">Copy to Clipboard</label>
      </div>
      <div>
        <input type="checkbox" id="hugo" name="hugo">
        <label for="hugo">Hugo Mode with rawHtml</label>
      </div>
  </fieldset>
  </div>
  <div id="main">

<div id='editor' contenteditable=true></div>
<hr>
<button onclick="copyText()">Copy</button>
<hr>
<div id='resultcnt'>Copyed image src:<br />
  <code id='result'></code>
</div>

</div>
</body>
</html>
